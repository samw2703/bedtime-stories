<!--npx serve . to run-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Random Story</title>
  <script src="stories.js"></script>
  <script src="rssFeeds.js"></script>
  <script>
    window.onload = async function() {
      window.location.href = await getRandomStoryUrl();
    };

    async function pickRandomStoryForIFrame() {
      const url = getRandomStoryUrl();
      //TODO: redirect to this url in iframe
    }

    async function getRandomStoryUrl() {
      const source = getRandomSource();
      return await getRandomUrl(source);
    }

    function getRandomSource() {
      const sources = ["urls", "bbc"];
      return sources[Math.floor(Math.random() * sources.length)];
    }

    async function getRandomUrl(source) {
      if (source === "urls")
        return pickRandomStory();

      if (source === "bbc")
        return await getRandomArticle('https://feeds.bbci.co.uk/news/rss.xml');

      return "";
    }
  </script>
</head>
<body>
  <!--TODO: 
    add a button titled next, that sits in the top left of the screen and when clicked calls pickRandomStoryForIFrame()
    add iframe that takes up full width of screen and full height, other than slither at top where the next button is. url of iframe should be set by the pickRandomStoryForIFrame method.
  -->
</body>
</html>
